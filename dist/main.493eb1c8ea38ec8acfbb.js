!function(e){function t(t){for(var n,c,i=t[0],u=t[1],s=t[2],m=0,f=[];m<i.length;m++)c=i[m],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(l&&l(t);f.length;)f.shift()();return o.push.apply(o,s||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var u=r[i];0!==a[u]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={0:0},o=[];function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window.webpackJsonp=window.webpackJsonp||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var l=u;o.push([145,1]),r()}({145:function(e,t,r){r(146),e.exports=r(373)},332:function(e,t,r){},373:function(e,t,r){"use strict";r.r(t);r(332);var n=r(0),a=r.n(n),o=r(72),c=r(31),i=r(35),u=r(9),s=r(38),l=r(142),m=r(143),f={currentScore:0,isPaused:!0,step:20,ratio:.1,direction:[0,1],positions:[{x:40,y:100},{x:40,y:80},{x:40,y:60},{x:40,y:40},{x:40,y:20}],food:{x:200,y:200},area:{height:300,width:300},border_width:3,segment:{height:20,width:20}};function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=Object(s.combineReducers)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case"SPAWN_FOOD":return d(d({},e),{},{food:r});case"MOVE_SNAKE":return d(d({},e),{},{direction:r.direction,positions:r.positions});case"PAUSE":return d(d({},e),{},{isPaused:!e.isPaused});case"CHANGE_SCORE":return d(d({},e),{},{currentScore:r.currentScore});case"RESET_SCORE":return d(d({},e),{},{currentScore:0});case"RESET_GAME":var n=r.direction,a=r.positions,o=r.food,c=r.currentScore;return d(d({},e),{},{direction:n,positions:a,food:o,currentScore:c});default:return e}}}),h=[m.a],g=Object(s.createStore)(b,{},Object(l.composeWithDevTools)(s.applyMiddleware.apply(void 0,h))),v=function(){return a.a.createElement("ul",{className:"main-menu"},a.a.createElement("li",{className:"main-menu__item"},a.a.createElement(i.b,{to:"/game"},a.a.createElement("h3",null,"Play"))),a.a.createElement("li",{className:"main-menu__item"},a.a.createElement(i.b,{to:"/score"},a.a.createElement("h3",null,"Top score"))))},E=r(13),O=r.n(E),j=function(e){var t=e.main,r=t.food,n=r.x,o=r.y,c=t.segment,i={left:n+"px",bottom:o+"px",height:c.height+"px",width:c.width+"px"};return a.a.createElement("div",{className:"food puls",style:i})};j.propTypes={main:O.a.object.isRequired};var S=Object(c.b)((function(e){return{main:e.main}}))(j),w=function(e){var t=e.position,r=t.x,n=t.y,o=e.segment,c=o.height,i=o.width,u=e.delay,s=e.animated,l=e.ratio,m={bottom:n+"px",left:r+"px",height:c+"px",width:i+"px",animationDelay:"".concat(u,"s"),transitionDuration:"".concat(l,"s")};return a.a.createElement("div",{className:"snake__body-segment snake__body-segment--1 ".concat(s?"puls":""),style:m})};w.propTypes={position:O.a.object.isRequired,segment:O.a.object.isRequired};var _=w,x=function(e){var t=e.main,r=t.positions,o=t.segment,c=t.ratio,i=Object(n.useRef)(r.length),u=Object(n.useRef)(!0);return i.current!==r.length&&(i.current=r.length,u.current=!1),Object(n.useEffect)((function(){u.current||setTimeout((function(){u.current=!0}))})),a.a.createElement(n.Fragment,null,r.map((function(e,t){return a.a.createElement(_,{key:t,position:e,segment:o,delay:.1*t,animated:u.current,ratio:c})})))};x.propTypes={main:O.a.object.isRequired};var P=Object(c.b)((function(e){return{main:e.main}}))(x);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function e(t,r){var n,a=r.area,o=r.segment,c=Math.random()*(a.width-o.width),i=Math.random()*(a.height-o.height),u=c-c%o.width,s=i-i%o.height,l=A(t);try{for(l.s();!(n=l.n()).done;){var m=n.value;if(m.x===u&&m.y===s)return e(t,r)}}catch(e){l.e(e)}finally{l.f()}return{type:"SPAWN_FOOD",payload:{x:u,y:s}}},k=function(){return{type:"PAUSE"}},G=function(e){return{type:"CHANGE_SCORE",payload:{currentScore:e+=20}}},C=function(){return{type:"RESET_SCORE"}},F=function(e,t){var r=e[e.length-1];t.push(r)},q=function(e,t,r){var n,a,o=r.step;return e.map((function(e,r){if(0===r){n=R({},e);var c=e.x,i=e.y;return{x:c+t[0]*o,y:i+t[1]*o}}return a=R({},n),n=R({},e),a}))},I=function(e,t){var r=t.area,n=t.segment,a=r.width-n.width,o=r.height-n.height,c=e[0];if(!c)return!1;if(c.x>a||c.x<0||c.y>o||c.y<0)return!0;for(var i=1;i<e.length;i++)if(c.x===e[i].x&&c.y===e[i].y)return!0;return!1},J=function(e,t){var r=t.food,n=e[0];return!!n&&(r.x===n.x&&r.y===n.y)},L=function(e){if(!(e<=0)){var t={date:new Date,score:e},r=JSON.parse(localStorage.getItem("score"));if(r&&0!==r.length)for(var n=0;n<r.length;n++){if(r[n].score<e){r.splice(n,0,t);break}n===r.length-1&&n<4&&r.push(t)}else(r=[]).push(t);console.log(r),r.length>5&&(r=r.slice(0,5)),console.log(r),localStorage.setItem("score",JSON.stringify(r))}},K=function(e){var t=e.main,r=e.moveSnake,o=e.pauseGame,c=e.resetGame,i=t.direction,u=t.positions,s=t.ratio,l=t.area,m=t.border_width,f=t.isPaused,p=Object(n.useRef)(),d=Object(n.useRef)(!1),y=Object(n.useRef)(0),b=Object(n.useRef)(i),h=Object(n.useRef)(i),g=Object(n.useRef)(!1);Object(n.useEffect)((function(){return document.body.addEventListener("keydown",O),document.body.addEventListener("touchstart",_),document.body.addEventListener("touchmove",x),function(){c(),document.body.removeEventListener("keydown",O),document.body.removeEventListener("touchstart",_),document.body.removeEventListener("touchmove",x)}}),[]),Object(n.useEffect)((function(){b.current=i,g.current?(h.current=g.current,g.current=!1):h.current=i,f||(p.current=requestAnimationFrame(v))}),[u,f]);var v=function e(t){if(d.current||(d.current=t),y.current=t-d.current,y.current/1e3>s)return r(h.current),void(d.current=t);f||(p.current=requestAnimationFrame(e))},E=function(e,t){return e[0]===t[0]&&e[1]===t[1]},O=function(e){var t,r,n,a=e.keyCode;32!==a?(E(h.current,b.current)?(t=b.current,r=1):(t=h.current,r=2),37===a?n=[-1,0]:38===a?n=[0,1]:39===a?n=[1,0]:40===a&&(n=[0,-1]),console.log(n),n&&!E(n,t)&&(n[0]===t[0]&&n[1]!==t[1]||n[0]!==t[0]&&n[1]===t[1]||(1===r?h.current=n:2===r&&(g.current=n)))):o()},j=Object(n.useRef)(!1),w=Object(n.useRef)(!1),_=function(e){console.log("onTouchStart"),j.current=e.changedTouches[0].screenX,w.current=e.changedTouches[0].screenY},x=function(e){var t,r=e.changedTouches[0].screenX,n=e.changedTouches[0].screenY,a=r-j.current,o=n-w.current,c=Math.abs(a),i=Math.abs(o);c<10&&i<10||((t=c/i<1?o<0?[0,1]:[0,-1]:a<0?[-1,0]:[1,0])[0]===b.current[0]&&t[1]!==b.current[1]||t[0]!==b.current[0]&&t[1]===b.current[1]||(h.current?g.current||(g.current=t):h.current=t))},N={height:l.height+2*m,width:l.width+2*m,borderWidth:m};return a.a.createElement("div",{className:"game-area",style:N,onKeyDown:O},a.a.createElement(S,null),a.a.createElement(P,null),f?a.a.createElement("p",null,"Pause"):"")};K.propTypes={main:O.a.object.isRequired};var W=Object(c.b)((function(e){return{main:e.main}}),{moveSnake:function(e){return function(t,r){var n=r().main,a=n.positions,o=n.currentScore,c=q(a,e,n);if(I(c,n)){var i=f.positions,u=f.direction;L(o),t(k()),t(C()),t(M(i,n)),t({type:"MOVE_SNAKE",payload:{positions:i,direction:u}})}else J(c,n)&&(F(a,c),t(G(o)),t(M(c,n))),t({type:"MOVE_SNAKE",payload:{positions:c,direction:e}})}},pauseGame:k,resetGame:function(){return{type:"RESET_GAME",payload:{direction:f.direction,positions:f.positions,food:f.food,currentScore:f.currentScore}}}})(K),H=function(e){var t,r=e.main,n=e.pauseGame,o=r.currentScore,c=JSON.parse(localStorage.getItem("score"));return t=c&&0!==c.length?c[0].score:0,a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"score"},a.a.createElement("p",{className:"score__top"},"Top score:"," ",a.a.createElement("span",null,o>t?o:t)),a.a.createElement("p",{className:"score__current"},"Score: ",a.a.createElement("span",null,o))),a.a.createElement(W,null),a.a.createElement("div",{className:"controls"},a.a.createElement("a",{className:"btn",onClick:n},"Pause"),a.a.createElement(i.b,{to:"/",className:"btn"},"Return")))};H.propTypes={main:O.a.object.isRequired};var U=Object(c.b)((function(e){return{main:e.main}}),{pauseGame:k})(H),V=function(e){var t=e.id,r=e.date,n=e.score,o=new Date(r),c=o.getFullYear(),i=o.getMonth()+1,u=o.getDate(),s=o.getHours(),l=o.getMinutes();return a.a.createElement("li",{className:"score-menu__item"},a.a.createElement("p",{className:"score-menu__data"},a.a.createElement("span",{className:"score-menu__number"},t,". - "),a.a.createElement("span",{className:"score-menu__date"},s,":",l," - ",u,".",i,".",c)),a.a.createElement("span",{className:"score-menu__score"}," --- ",n," points"))},Y=function(){var e=JSON.parse(localStorage.getItem("score")),t=!1;return 0===e.length&&(t=!0),a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"score-menu"},t?a.a.createElement("li",{className:"score-menu__item"},"--- No records yet ---"):e.map((function(e,t){var r=e.date,n=e.score;return a.a.createElement(V,{key:t,id:t+1,date:r,score:n})}))),a.a.createElement(i.b,{to:"/",className:"btn"},"Return"))},X=r(144),B=r.n(X),$=function(){return Object(n.useEffect)((function(){new B.a({element:"#gradient",name:"granim",opacity:[1,1],states:{"default-state":{gradients:[["#ff9966","#ff5e62"],["#00F260","#0575E6"],["#f05053","#f0e937"]]}}})}),[]),a.a.createElement(i.a,null,a.a.createElement(c.a,{store:g},a.a.createElement("div",{className:"container"},a.a.createElement("h1",{className:"logo"},"Snake"),a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/"},a.a.createElement(v,null)),a.a.createElement(u.a,{exact:!0,path:"/game"},a.a.createElement(U,null)),a.a.createElement(u.a,{exact:!0,path:"/score"},a.a.createElement(Y,null))),a.a.createElement("canvas",{id:"gradient"}))))};Object(o.render)(a.a.createElement($,null),document.getElementById("app"))}});